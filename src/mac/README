========================================================================
 Compiling for MacOS Classic
========================================================================

Read the instructions in plt/src/mac/cw/README

========================================================================
 Compiling for MacOS X using X Windows
========================================================================

1) in sconfig.h, comment out the '#define MACINTOSH_EVENTS' line
2) build as indicated by plt/src/README for UNIX platforms

========================================================================
 Compiling for MacOS X
========================================================================

THESE INSTRUCTIONS ARE IN FLUX.  I am in the process of moving from
all-IDE development to (hopefully) all-makefile.  There are some
issues, as you'll see.

In order to compile MzScheme and MrEd for OS X, you will need to have
_both_ the Metrowerks tools (currently 7.1) and the Apple developer
tools installed. This compilation uses 'make', so you will need to be
comfortable with the command-line (Terminal).

Hmmm... I think you'll also need to have the dlcompat library installed.
You can get this from fink.

Also, these instructions are needlessly complicated because I haven't
yet written scripts to do everything in the right order.

0) You must have the Apple Developer Tools installed, as well
as Codewarrior 7.1 (or higher). Make sure that 'mwccppc', the
metrowerks command-line compiler, is in your path, and the various
shell variables used by mwccppc are in place.  After a full install
of Metrowerks, both of these should be true (although I think the
installation assumes you're using tcsh, and just plops everything
in a .tchsrc)

1) cd to the plt/src directory, and execute 'env CC="mwccppc" ./configure'

2) cd to plt/src/mzscheme, and execute 'make mz'

3) now execute 'make mzinstall'

4) cd to plt/src/mac and execute the pre-make script by typing 
./pre-make
(This step requires mzscheme, which is why we had to build it first.)

4.5) HORRIBLE ICKY HACK: find scheme.h and comment out the lines that
require 'carbon-precomp'.  This is strictly a temporary thing. YUCK!

5) As for MrEd; in Codewarrior, open the project file
plt/src/mac/cw/MrEd.mcp, choose the "MrEd.OSX" target from the
pull-down menu in the upper-left corner, and then Make
(cmd-m). (Ignore warning on opening the file of the form "couldn't
find /usr/local/lib")

6) Once again: in Codewarrior, open the project file
plt/src/mac/cw/Starters.mcp, choose the "MrStarter.OSX" target, and 
make with cmd-m.

7) to compile .zo's and create launchers, cd to /plt/bin and type:
./mzscheme -mvqL- setup.ss setup

*** OPTION 2: Installing downloaded binaries:

As of 2001-12-10, the download site for these binaries is 
<http://www.ccs.neu.edu/~clements/download/>

1) download mzscheme.sit, and unstuff it in the plt/bin directory

2) download MrEd.app.sit, and unstuff it in the the plt/bin directory

3) download Starter.app.sit, and unstuff it in the plt/collects/launcher
directory

4) to compile .zo's and create launchers, cd to plt/bin and type:
./mzscheme -mvqL- setup.ss setup

*** OPTION 3: Compiling MzScheme for Mac OS X using only cc :

0) You must have the Apple Developer Tools installed.

1) in the files plt/src/mzscheme/sconfig.h and plt/include/sconfig.h,
comment out the #define for MACINTOSH_EVENTS in the OS X portion of the
file.  That is, change
# define MACINTOSH_EVENTS
to
/*# define MACINTOSH_EVENTS */
on line 647.

(Ed. Note.: There's a way around this, but it's currently too ugly
to make public.)

2) Now follow the Unix build instructions contained in plt/src/README

3) to compile .zo's and create launchers, cd to /plt/bin and type:
./mzscheme -mvqL- setup.ss setup



Comments, suggestions, questions?  Send them all to: clements@brinckerhoff.org
November 29, 2001