# makefile for libpng
# Copyright (C) 2002 Glenn Randers-Pehrson
# Copyright (C) 1995 Guy Eric Schalnat, Group 42, Inc.
# For conditions of distribution and use, see copyright notice in png.h

srcdir = @srcdir@

CC = @CC@

# override DESTDIR= on the make install command line to easily support
# installing into a temporary location.  Example:
#
#    make install DESTDIR=/tmp/build/libpng
#
# If you're going to install into a temporary location
# via DESTDIR, $(DESTDIR)$(prefix) must already exist before
# you execute make install.
DESTDIR=

# Where the zlib library and include files are located
#ZLIBLIB=/usr/local/lib
#ZLIBINC=/usr/local/include
ZLIBLIB=../zlib
ZLIBINC=../zlib

CFLAGS=@CFLAGS@ @OPTIONS@ @MROPTIONS@ -I$(ZLIBINC)

RANLIB=@RANLIB@

OBJS = png.o pngset.o pngget.o pngrutil.o pngtrans.o pngwutil.o \
	pngread.o pngrio.o pngwio.o pngwrite.o pngrtran.o \
	pngwtran.o pngmem.o pngerror.o pngpread.o

all: libpng.a pngtest

libpng.a: $(OBJS)
	@AR@ @ARFLAGS@ $@  $(OBJS)
	$(RANLIB) $@

clean:
	rm -f *.o libpng.a pngtest pngout.png

PNG_CC=$(CC) $(CFLAGS) -c

png.o: $(srcdir)/png.c $(srcdir)/png.h $(srcdir)/pngconf.h
	$(PNG_CC) $(srcdir)/png.c -o png.o
pngerror.o: $(srcdir)/pngerror.c $(srcdir)/png.h $(srcdir)/pngconf.h
	$(PNG_CC) $(srcdir)/pngerror.c -o pngerror.o
pngrio.o: $(srcdir)/pngrio.c $(srcdir)/png.h $(srcdir)/pngconf.h
	$(PNG_CC) $(srcdir)/pngrio.c -o pngrio.o
pngwio.o: $(srcdir)/pngwio.c $(srcdir)/png.h $(srcdir)/pngconf.h
	$(PNG_CC) $(srcdir)/pngwio.c -o pngwio.o
pngmem.o: $(srcdir)/pngmem.c $(srcdir)/png.h $(srcdir)/pngconf.h
	$(PNG_CC) $(srcdir)/pngmem.c -o pngmem.o
pngset.o: $(srcdir)/pngset.c $(srcdir)/png.h $(srcdir)/pngconf.h
	$(PNG_CC) $(srcdir)/pngset.c -o pngset.o
pngget.o: $(srcdir)/pngget.c $(srcdir)/png.h $(srcdir)/pngconf.h
	$(PNG_CC) $(srcdir)/pngget.c -o pngget.o
pngread.o: $(srcdir)/pngread.c $(srcdir)/png.h $(srcdir)/pngconf.h
	$(PNG_CC) $(srcdir)/pngread.c -o pngread.o
pngrtran.o: $(srcdir)/pngrtran.c $(srcdir)/png.h $(srcdir)/pngconf.h
	$(PNG_CC) $(srcdir)/pngrtran.c -o pngrtran.o
pngrutil.o: $(srcdir)/pngrutil.c $(srcdir)/png.h $(srcdir)/pngconf.h
	$(PNG_CC) $(srcdir)/pngrutil.c -o pngrutil.o
pngtest.o: $(srcdir)/pngtest.c $(srcdir)/png.h $(srcdir)/pngconf.h
	$(PNG_CC) $(srcdir)/pngtest.c -o pngtest.o
pngtrans.o: $(srcdir)/pngtrans.c $(srcdir)/png.h $(srcdir)/pngconf.h
	$(PNG_CC) $(srcdir)/pngtrans.c -o pngtrans.o
pngwrite.o: $(srcdir)/pngwrite.c $(srcdir)/png.h $(srcdir)/pngconf.h
	$(PNG_CC) $(srcdir)/pngwrite.c -o pngwrite.o
pngwtran.o: $(srcdir)/pngwtran.c $(srcdir)/png.h $(srcdir)/pngconf.h
	$(PNG_CC) $(srcdir)/pngwtran.c -o pngwtran.o
pngwutil.o: $(srcdir)/pngwutil.c $(srcdir)/png.h $(srcdir)/pngconf.h
	$(PNG_CC) $(srcdir)/pngwutil.c -o pngwutil.o
pngpread.o: $(srcdir)/pngpread.c $(srcdir)/png.h $(srcdir)/pngconf.h
	$(PNG_CC) $(srcdir)/pngpread.c -o pngpread.o
