
srcdir = @srcdir@

MZSCHEME=../../mzscheme/mzscheme -e "(use-compiled-file-kinds 'none)"

all: $(srcdir)/../wxs/wrap.inc $(srcdir)/../wxs/cwrap.inc

again:
	rm wrap.ss
	$(MAKE) all

$(srcdir)/../wxs/wrap.inc: wrap.ss
	@PERL@ $(srcdir)/../../mzscheme/src/sstoinc < wrap.ss > $(srcdir)/../wxs/wrap.inc

../wxs/cwrap.inc: $(srcdir)/../wxs/wrap.inc $(srcdir)/../../mzscheme/src/schvers.h
	$(MZSCHEME) -gqrna $(srcdir)/../../mzscheme/src/sstoinc.ss < wrap.ss > $(srcdir)/../wxs/cwrap.inc

wrap.ss: $(srcdir)/import.ss $(srcdir)/export.ss $(srcdir)/propgate.ss $(srcdir)/mred.ss $(srcdir)/mkwrap.ss
	$(MZSCHEME) -qmvqr $(srcdir)/mkwrap.ss
